<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
	<link rel='stylesheet' href='/stylesheets/bootstrap.css' />
	<link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
	<link rel='stylesheet' href='/stylesheets/bootstrap-responsive.min.css' />
	<link rel='stylesheet' href='/stylesheets/bootstrap-responsive.css' />
  <link rel='stylesheet' href='/stylesheets/slick.grid.css' />
  <link rel='stylesheet' href='/javascripts/slickgrid/css/jquery-ui-1.8.16.custom.css' />
  <link rel='stylesheet' href='/stylesheets/grid.css'/>
  <style>
    .cell-title {
      font-weight: bold;
    }

    .cell-effort-driven {
      text-align: center;
    }
  </style>
  <% scripts.push('jquery-1.9.1.min.js', 'jquery.validate.js', 'signupform.js', 'bootstrap.js') %>
  <%- renderScriptsTags(scripts) %>
  </head>
  <body>
  <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="navbar-inner">
                <div class="container"><!-- Collapsable nav bar -->
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>

                    <!-- Your site name for the upper left corner of the site -->
                    <a class="brand" href="/">PhoneGap events app generator</a>

                    <!-- Start of the nav bar content -->
                    <div class="nav-collapse"><!-- Other nav bar content -->

                        
                        

                        <!-- The drop down menu -->
                        <ul class="nav pull-right">
                            
                                <li>
                                    <a href="">
                                        Welcome, <%= user %>
                                    </a>
                                </li>
                                <li class="divider-vertical"></li>
                                <li>
                                    <a href="/logout/">
                                        Logout
                                    </a>
                                </li>
                            
                        </ul>
                    </div>
                </div>
            </div>
        </div>
  <div class="row-fluid">
  <div id="main-container" class="container">
  <div class="span2"></div>
 <form class="form-horizontal" id='signupform' action='/editevent' method="POST">
  <fieldset>
    <div id="legend">
      <legend class="">Creating app for <%= eventname %></legend>
    </div>
    <div class="tabbable tabs-left">
      <ul class="nav nav-tabs">
        <li class="active">
          <a href="#appgeneral" data-toggle="tab">
            <span class="badge">1</span>
                App information
          </a>
        </li>
        <li>
          <a href="#schedule" data-toggle="tab">
            <span class="badge">2</span>
                Schedule
          </a>
        </li>
        <li>
          <a href="#appfiles" data-toggle="tab">
            <span class="badge">3</span>
                Required files
            </a>
        </li>
        <li>
            <a href="#appsettings" data-toggle="tab">
              <span class="badge">4</span>
                App settings
            </a>
        </li>
        <br/>
        <button type="submit" name="submit" class="btn btn-small btn-primary">Save</button> <a class="btn btn-small btn-danger" href="javascript:history.back()">Cancel</a>
      </ul>

<div class="tab-content">
  <div class="tab-pane active" id="appgeneral">
    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="fullname">App name</label>
      <div class="controls">
        <input type="text" id="fullname" name="fullname" value="" placeholder="" class="required input-xlarge">
      </div>
    </div>

    <div class="control-group">
      <!-- E-mail -->
      <label class="control-label" for="email">Description:</label>
      <div class="controls">
        <textarea rows="5" id="descr" name="descr" value="" placeholder="" class="required input-xlarge"></textarea>
        <p class="help-block">Description for the app store</p>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="schedule">
    <div class="control-group">
      <div style="width:600px;">
        <div id="myGrid" style="width:100%;height:500px;"></div>
      </div>
    </div>
</div>

<div class="tab-pane" id="appfiles">
    <div class="control-group">
      <!-- E-mail -->
      <label class="control-label" for="realname">Logo/splash screen:</label>
      <div class="controls">
        <input type="file" id="realname" name="realname" value="" placeholder="" class="required input-xlarge">
        <p class="help-block">A .png file is preferred</p>
      </div>
    </div>

    <div class="control-group">
      <!-- E-mail -->
      <label class="control-label" for="realname">CSS files:</label>
      <div class="controls">
        <input type="file" id="realname" name="realname" value="" placeholder="" class="required input-xlarge">
        <p class="help-block">Download <a href="">this file</a>, edit it and upload it</p>
      </div>
    </div>

    <div class="control-group">
      <!-- E-mail -->
      <label class="control-label" for="realname">Other files:</label>
      <div class="controls">
        <input type="file" id="realname" name="realname" value="" placeholder="" class="required input-xlarge">
        <p class="help-block">Download <a href="">this file</a>, edit it and upload it</p>
      </div>
    </div>
</div>

<div class="tab-pane" id="appsettings">
    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="ename">iOS</label>
      <div class="controls">
        <input type="checkbox" id="twitter" value="">
      </div>
    </div>

    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="ename">Android</label>
      <div class="controls">
        <input type="checkbox" id="twitter" value="">
      </div>
    </div>

    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="ename">Twitter</label>
      <div class="controls">
        <input type="checkbox" id="twitter" value="">
      </div>
    </div>

    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="ename">Facebook</label>
      <div class="controls">
        <input type="checkbox" id="twitter" value="">
      </div>
    </div>

    <div class="control-group">
      <!-- Username -->
      <label class="control-label"  for="ename">Evernote</label>
      <div class="controls">
        <input type="checkbox" id="twitter" value="">
      </div>
    </div>
  </div>
</div>
</div>
    <input type="hidden" id="appid" value="<%= appid %>">
    <input type="hidden" name="_csrf" value="<%= token %>">
  </fieldset>
</form>
</div>
<% scripts.push('slickgrid/lib/firebugx.js', 'slickgrid/lib/jquery-1.7.min.js', 'slickgrid/lib/jquery-ui-1.8.16.custom.min.js', 'slickgrid/lib/jquery.event.drag-2.2.js', 'slickgrid/slick.core.js', 'slickgrid/plugins/slick.cellrangedecorator.js', 'slickgrid/plugins/slick.cellrangeselector.js', 'slickgrid/plugins/slick.cellselectionmodel.js', 'slickgrid/slick.formatters.js', 'slickgrid/slick.editors.js', 'slickgrid/slick.grid.js') %>
  <%- renderScriptsTags(scripts) %>
  <script type="text/javascript">
 function requiredFieldValidator(value) {
    if (value == null || value == undefined || !value.length) {
      return {valid: false, msg: "This is a required field"};
    } else {
      return {valid: true, msg: null};
    }
  }

  var grid;
  var data;
  var columns = [
    {id: "title", name: "Title", field: "title", width: 120, cssClass: "cell-title", editor: Slick.Editors.Text, validator: requiredFieldValidator},
    {id: "desc", name: "Description", field: "description", width: 100, editor: Slick.Editors.LongText},
    {id: "duration", name: "Duration", field: "duration", editor: Slick.Editors.Text},
    {id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar, editor: Slick.Editors.PercentComplete},
    {id: "start", name: "Start", field: "start", minWidth: 60, editor: Slick.Editors.Date},
    {id: "finish", name: "Finish", field: "finish", minWidth: 60, editor: Slick.Editors.Date},
    {id: "effort-driven", name: "Effort Driven", width: 80, minWidth: 20, maxWidth: 80, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox}
  ];
  var options = {
    editable: true,
    enableAddRow: true,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: false
  };

  $(function () {
    for (var i = 0; i < 500; i++) {
      var d = (data[i] = {});

      d["title"] = "Task " + i;
      d["description"] = "This is a sample task description.\n  It can be multiline";
      d["duration"] = "5 days";
      d["percentComplete"] = Math.round(Math.random() * 100);
      d["start"] = "01/01/2009";
      d["finish"] = "01/05/2009";
      d["effortDriven"] = (i % 5 == 0);
    }

    grid = new Slick.Grid("#myGrid", data, columns, options);

    grid.setSelectionModel(new Slick.CellSelectionModel());

    grid.onAddNewRow.subscribe(function (e, args) {
      var item = args.item;
      grid.invalidateRow(data.length);
      data.push(item);
      grid.updateRowCount();
      grid.render();
    });
  })
  </script>
  <footer>
    <img id="logo-left" src="/static/img/morelab.png" width="150" />
    <img id="logo-right" src="/static/img/deustotech.png" width="150" />
  </footer>
  </body>
</html>
